<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <template id="autoparts_vehicle_filter_sidebar" inherit_id="website_sale.products"
            name="Autoparts Vehicle Filter Sidebar">

    <xpath expr="//div[contains(@class, 'o_wsale_products_grid_before_rail')]" position="inside">
      <div class="bg-light p-3">
        <!-- Important: method is GET -->
        <form method="get" t-att-action="request.httprequest.path">
          <div class="mt-3">

            <!-- Manufacturer -->
            <div class="form-group">
              <label for="manufacturer_select">Manufacturer</label>
              <select class="form-control" name="manufacturer_id" id="manufacturer_select">
                <option value="">All Manufacturers</option>
                <t t-foreach="brands" t-as="brand">
                  <option t-att-value="brand.id"
                          t-att-selected="request.params.get('manufacturer_id') == str(brand.id)">
                    <t t-esc="brand.name"/>
                  </option>
                </t>
              </select>
            </div>

            <!-- Model -->
            <div class="form-group">
              <label for="model_select">Model</label>
              <select class="form-control" name="model_id" id="model_select">
                <option value="">All Models</option>
                <t t-foreach="models" t-as="model">
                  <option t-att-value="model.id"
                          t-att-selected="request.params.get('model_id') == str(model.id)">
                    <t t-esc="model.name"/>
                  </option>
                </t>
              </select>
            </div>

            <!-- Year From -->
            <div class="form-group">
              <label for="year_from">Year From</label>
              <input type="number" name="year_from" class="form-control"
                     t-att-value="request.params.get('year_from') or ''"/>
            </div>

            <!-- Year To -->
            <div class="form-group">
              <label for="year_to">Year To</label>
              <input type="number" name="year_to" class="form-control"
                     t-att-value="request.params.get('year_to') or ''"/>
            </div>

            <!-- Engine Volume -->
            <div class="form-group">
              <label for="volume_select">Engine Volume</label>
              <select class="form-control" name="volume" id="volume_select">
                <option value="">All Volumes</option>
                <t t-foreach="volumes" t-as="vol">
                  <option t-att-value="vol.name"
                          t-att-selected="request.params.get('volume') == vol.name">
                    <t t-esc="vol.name"/>
                  </option>
                </t>
              </select>
            </div>

            <button type="submit" class="btn btn-primary mt-2">Search</button>
          </div>
        </form>
      </div>
    </xpath>
  </template>
</odoo>
